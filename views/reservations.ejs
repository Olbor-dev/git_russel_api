<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>R√©servations - Capitainerie de Russel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
  <h1>Gestion des r√©servations</h1>
  <div class="container-center">
    <a class="button" href="/dashboard">Retour au tableau de bord</a>
    <a class="button" href="/logout">D√©connexion</a>
  </div>
  <hr>
  </header>
  <main>
    <h2>Nouvelle r√©servation</h2>
    <form action="/reservations/create" method="POST">
      <div class="form-row">
        <select name="catwayNumber" required>
          <% catways.forEach(catway => { %>
            <option value="<%= catway.catwayNumber %>"><%= catway.catwayNumber %> - <%= catway.type %></option>
          <% }) %>
        </select>
        <input type="text" name="clientName" placeholder="Nom du client" required>
        <input type="text" name="boatName" placeholder="Nom du bateau" required>
        <input type="date" name="checkIn" required>
        <input type="date" name="checkOut" required>
        <button class="button" type="submit">Cr√©er</button>
      </div>
    </form>

    <hr>

    <h2>Liste des r√©servations</h2>
    <% if (reservations.length === 0) { %>
      <p>Aucune r√©servation enregistr√©e.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Catway</th>
            <th>Client</th>
            <th>Bateau</th>
            <th>Arriv√©e</th>
            <th>D√©part</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% reservations.forEach(r => { %>
            <tr>
              <form action="/reservations/update/<%= r._id %>" method="POST">
                <td><input type="number" name="catwayNumber" value="<%= r.catwayNumber %>" required title="Num√©ro du catway"></td>
                <td><input type="text" name="clientName" value="<%= r.clientName %>" required title="Nom du client"></td>
                <td><input type="text" name="boatName" value="<%= r.boatName %>" required title="Nom du bateau"></td>
                <td><input type="date" name="checkIn" value="<%= r.checkIn.toISOString().split('T')[0] %>" required title="Date d'arriv√©e"></td>
                <td><input type="date" name="checkOut" value="<%= r.checkOut.toISOString().split('T')[0] %>" required title="Date de d√©part"></td>
                <td>
                  <button type="submit" title="Enregistrer les modifications">‚úèÔ∏è</button> / 
                  <a href="/reservations/delete/<%= r._id %>" onclick="return confirm('Supprimer cette r√©servation ?')" title="Supprimer la r√©servation">üóëÔ∏è</a>
                </td>
              </form>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </main>
</body>
</html>
